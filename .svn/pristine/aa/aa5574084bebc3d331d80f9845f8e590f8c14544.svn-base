# -*- coding: utf-8 -*-  
import os
import sys
import ConfigParser
import logging

"""
init constant var
"""
PATH_ROOT	=	''

LOG_LEVEL	=	None

MAIL_SERVER=''
MAIL_FROM=''
MAIL_TO=''

config= None


def __get_config():
	config_path = PATH_ROOT + '/conf/app.py'
	#print config_path
	cf = ConfigParser.ConfigParser()
	cf.read(config_path)
	sections = {}
	for section in cf.sections():
		sections[section] = {}
		items = cf.items(section)
		for item in items:
			key = item[0]
			value = item[1]
			sections[section][key] = value
	return sections

def __init():
	global PATH_ROOT
	global LOG_LEVEL
	global MAIL_SERVER,MAIL_FROM,MAIL_TO
	global config
	script_path = os.path.dirname(os.path.abspath(__file__))

	#PATH_ROOT = script_path[0:-8]
	PATH_ROOT = script_path

	config = __get_config()

	try:
		log_level = int(config['GLOBAL']['log_level'])
		
		if log_level == 1:
			LOG_LEVEL = logging.ERROR
		elif log_level == 2:
			LOG_LEVEL = logging.WARNING
		elif log_level == 3:
			LOG_LEVEL = logging.INFO
		elif log_level == 4:
			LOG_LEVEL =logging.DEBUG

		
		MAIL_SERVER = config['MAIL']['smtp_server']
		MAIL_FROM = config['MAIL']['from']
		MAIL_TO = config['MAIL']['to']

	except Exception,e:
		print 'config file error[%s],exit'%(e)
		sys.exit()

__init()
